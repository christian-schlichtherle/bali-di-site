<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Introduction | Bali DI</title>
    <meta name="description" content="A tool for dependency injection in Java and Scala at compile-time.">
    <meta name="generator" content="VitePress v1.0.2">
    <link rel="preload stylesheet" href="/assets/style.5Mns_uyW.css" as="style">
    
    <script type="module" src="/assets/app.C6SpvSwh.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Bu8hRsVA.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.Dcugq_a2.js">
    <link rel="modulepreload" href="/assets/chunks/theme.Bzgvkbz5.js">
    <link rel="modulepreload" href="/assets/guide_introduction.md.DXrTAhab.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar has-sidebar top" data-v-ae24b3ad data-v-ccf7ddec><div class="wrapper" data-v-ccf7ddec><div class="container" data-v-ccf7ddec><div class="title" data-v-ccf7ddec><div class="VPNavBarTitle has-sidebar" data-v-ccf7ddec data-v-ab179fa1><a class="title" href="/" data-v-ab179fa1><!--[--><!--]--><!--[--><img class="VPImage logo" src="/image/frangipani.png" width="102" height="64" alt data-v-8426fc1a><!--]--><span data-v-ab179fa1>Bali DI</span><!--[--><!--]--></a></div></div><div class="content" data-v-ccf7ddec><div class="content-body" data-v-ccf7ddec><!--[--><!--]--><div class="VPNavBarSearch search" data-v-ccf7ddec><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-ccf7ddec data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guide/java.html" tabindex="0" data-v-7f418b0f data-v-9c663999><!--[--><span data-v-9c663999>Bali DI for Java</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guide/scala.html" tabindex="0" data-v-7f418b0f data-v-9c663999><!--[--><span data-v-9c663999>Bali DI for Scala</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://github.com/christian-schlichtherle/bali-di-java" target="_blank" rel="noreferrer" tabindex="0" data-v-7f418b0f data-v-9c663999><!--[--><span data-v-9c663999>Java Repo</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://github.com/christian-schlichtherle/bali-di-scala" target="_blank" rel="noreferrer" tabindex="0" data-v-7f418b0f data-v-9c663999><!--[--><span data-v-9c663999>Scala Repo</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-ccf7ddec data-v-e6aabb21><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-e6aabb21 data-v-d1f28634 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-d1f28634></span><span class="vpi-moon moon" data-v-d1f28634></span><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-ccf7ddec data-v-d0bd9dde data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-b6c34ac9><span class="vpi-more-horizontal icon" data-v-b6c34ac9></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-d0bd9dde><div class="item appearance" data-v-d0bd9dde><p class="label" data-v-d0bd9dde>Appearance</p><div class="appearance-action" data-v-d0bd9dde><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-d0bd9dde data-v-d1f28634 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-d1f28634></span><span class="vpi-moon moon" data-v-d1f28634></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-ccf7ddec data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-ccf7ddec><div class="divider-line" data-v-ccf7ddec></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-d2ecc192><button data-v-d2ecc192>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-575e6a36><div class="curtain" data-v-575e6a36></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-575e6a36><span class="visually-hidden" id="sidebar-aria-label" data-v-575e6a36> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0 has-active" data-v-575e6a36 data-v-b8d55f3b><!----><div class="items" data-v-b8d55f3b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/guide/introduction.html" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Introduction</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/guide/java.html" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Bali DI for Java</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/guide/scala.html" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Bali DI for Scala</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/guide/structure.html" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>On Structuring Modules</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-3f215769 data-v-935f8a84><div class="content" data-v-935f8a84><div class="outline-marker" data-v-935f8a84></div><div class="outline-title" role="heading" aria-level="2" data-v-935f8a84>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-935f8a84><span class="visually-hidden" id="doc-outline-aria-label" data-v-935f8a84> Table of Contents for current page </span><ul class="VPDocOutlineItem root" data-v-935f8a84 data-v-b933a997><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _guide_introduction" data-v-39a288b8><div><h1 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">​</a></h1><h2 id="motivation" tabindex="-1">Motivation <a class="header-anchor" href="#motivation" aria-label="Permalink to &quot;Motivation&quot;">​</a></h2><p>Does the world really need yet another tool for an idiom as simple as dependency injection? Well, I&#39;ve been frustrated with existing popular solutions like Spring, Guice, PicoContainer, Weld/CDI, MacWire etc in various projects for years, so I think the answer is &quot;yes, please&quot;!</p><p>Most of these tools bind dependencies at runtime, which is the first mistake already: By deferring the dependency binding to runtime, the compiler will not be able to tell you about missing dependencies or type mismatches and so the error detection is also deferred until runtime.</p><p>To mitigate the risk of deploying an erroneous dependency wiring plan into production, these tools typically instantiate the entire dependency graph at application startup, which in turn contributes to the slow application startup for which Java is so infamous. For example, Spring is well-known for slowing down application start-up because it typically scans the entire byte code for its annotations and then it builds the entire dependency graph based on its findings. Of course, you can avoid the annotation scanning by going down XML configuration hell - oh my!</p><p>Then again, if something is not working because you forgot to sprinkle your code with a qualifier annotation in order to discriminate two dependencies of the same type but with different semantics (say, two strings representing a database hostname and schema), then you may spend a lot of time debugging and analyzing this problem.</p><p>By the way, good luck with debugging <a href="https://en.wikipedia.org/wiki/Inversion_of_control" target="_blank" rel="noreferrer">IOC</a> containers: If you forget to add an annotation somewhere then your code may not even get called and so setting a breakpoint for debugging becomes pointless.</p><p>For worse, dependency injection at runtime is not even type-safe when it comes to generic classes due to type erasure. For example, your component may get a <code>List&lt;String&gt;</code> injected when it actually wants a <code>List&lt;User&gt;</code>.</p><p>Last but not least, all of these tools (even Macwire, which is for Scala) support dependency injection into constructors, methods and fields. For Java, this means you either have to write a lot of boiler plate code, for example the constructor plus the fields if you want to use constructor injection (which is the least bad of the three options), or your code gets hardwired to your DI tool by sprinkling it with even more annotations, for example Spring&#39;s <code>@Autowired</code> on fields (please don&#39;t do that).</p><h2 id="design-concept" tabindex="-1">Design Concept <a class="header-anchor" href="#design-concept" aria-label="Permalink to &quot;Design Concept&quot;">​</a></h2><p>To resolve the aforementioned issues, Bali DI employs a new, completely different approach:</p><ol><li><p>A dependency is declared as an abstract method in a component type. The method may have any type parameters and parameter list(s), but it must not have a void return type.</p></li><li><p>The dependency needs to be defined (or declared) as a (possibly abstract) element in some module context. This element must be assignment-compatible to the abstract method in the component type.</p></li><li><p>The compiler <em>binds</em> the dependency by implementing the abstract method in the component type so that it forwards the call to the element in the module context and (if desired) caches the result.</p></li><li><p>If the module context is a type, and the element is an abstract member of this type, then the compiler implements this member so that it creates and (if desired) caches the dependency unless annotated otherwise.</p></li><li><p>To configure this algorithm the compiler respects some annotations, e.g. to</p><ol><li>declare a module type, or</li><li>configure the name of an element, or</li><li>suppress the implementation of an abstract member of a module type, or</li><li>select the caching strategy for the result of a method call (optional), or</li><li>create an instance of a subtype in the implementation of an abstract member of a module type (optional).</li></ol></li></ol><h2 id="features-and-benefits" tabindex="-1">Features and Benefits <a class="header-anchor" href="#features-and-benefits" aria-label="Permalink to &quot;Features and Benefits&quot;">​</a></h2><ul><li><p><strong>Dependency bindings are type-checked</strong></p><p>The compiler type-checks all dependency bindings. This means that if a dependency is missing, then the compiler emits an error message, so that your app never crashes from an unsatisfied dependency at runtime. Likewise, if a dependency isn&#39;t assignment-compatible to the expected type, then an error message gets emitted too, so that a <code>Map&lt;User, List&lt;Order&gt;&gt;</code> never gets assigned to a <code>Map&lt;String, String&gt;</code> at runtime.</p></li><li><p><strong>Dependencies are resolved just-in-time</strong></p><p>When an abstract method in a component gets called for the first time, it&#39;s dependency gets created just-in-time and (if desired) cached for subsequent calls. This results in a more responsive behavior of your app than if the entire dependency graph would be created upfront at application startup. It also avoids polluting the heap with dependencies which are never used at runtime, eventually reducing heap pressure and thus, unnecessary CPU cycles spent on garbage collection.</p></li><li><p><strong>Dependencies are identified by name</strong></p><p>Dependencies are declared by abstract methods, so they don&#39;t just have a (return) type, but also a name. This means that a dependency like <code>String username()</code> is never mistaken for <code>String password()</code> or vice versa. There is no need for any (qualifier) annotation to discern them.</p></li><li><p><strong>No runtime libraries or annotation processing</strong></p><p>Bali DI generates all the necessary code at compile time, with zero library usage or annotation processing at runtime. This means that you don&#39;t need to worry about updating conflicting dependencies because there are none. Also, using Bali DI does not break any byte code analysis or transformation tools like SonarQube or ProGuard.</p></li><li><p><strong>Simple and scalable</strong></p><p>Dependencies are defined in module contexts, which can be module types. Module types can get composed into larger systems by inheritance or composition. This concept scales very well from a simple Hello-world app up to very large monolithic applications.</p></li><li><p><strong>Supports Java and Scala</strong></p><p>Bali DI is implemented as an annotation processor in Java and as a def macro in Scala. You can even use it in mixed Java/Scala projects.</p></li><li><p><strong>Mix-and-match with JSR 330</strong></p><p>Bali DI is based on a concept which is completely complementary to any implementation of <a href="https://jcp.org/en/jsr/detail?id=330" target="_blank" rel="noreferrer">JSR 330</a>. This means that you can mix and match Bali DI with any JSR 330 implementation like Spring, Guice, Macwire, CDI etc. It also means that you can use Bali DI in a library without the need to worry about breaking apps which use any of these tools.</p></li><li><p><strong>No IDE plugin required</strong></p><p>In Java, the annotation processor emits formatted Java source code. This means that you can inspect, test and debug the generated source code along with the rest of your source code. There is no need for any IDE plugin to make it &quot;understand&quot; Bali DI.</p></li><li><p><strong>Effectively eliminates <code>new</code></strong></p><p>The design of Bali DI is entirely based on the versatility and power of abstract types. However, implementing abstract types manually is cumbersome and tedious. Yet, this seeming disadvantage serves as a very effective deterrent to accidentally <code>new</code> an abstract type in your code and thereby waiving the merits of dependency injection.</p></li></ul></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-09de1c0f><!--[--><!--]--><div class="edit-info" data-v-09de1c0f><div class="edit-link" data-v-09de1c0f><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/christian-schlichtherle/bali-di-site/guide/introduction.md" target="_blank" rel="noreferrer" data-v-09de1c0f><!--[--><span class="vpi-square-pen edit-link-icon" data-v-09de1c0f></span> Edit this page on GitHub<!--]--></a></div><div class="last-updated" data-v-09de1c0f><p class="VPLastUpdated" data-v-09de1c0f data-v-7e05ebdb>Last updated: <time datetime="2024-05-31T08:01:18.000Z" data-v-7e05ebdb></time></p></div></div><nav class="prev-next" data-v-09de1c0f><div class="pager" data-v-09de1c0f><!----></div><div class="pager" data-v-09de1c0f><a class="VPLink link pager-link next" href="/guide/java.html" data-v-09de1c0f><!--[--><span class="desc" data-v-09de1c0f>Next page</span><span class="title" data-v-09de1c0f>Bali DI for Java</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-5d98c3a5 data-v-e315a0ad><div class="container" data-v-e315a0ad><p class="message" data-v-e315a0ad>Released under the Apache License, Version 2.0.</p><p class="copyright" data-v-e315a0ad>Copyright © Schlichtherle IT Services.</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"guide_introduction.md\":\"DXrTAhab\",\"index.md\":\"BIG666sV\",\"guide_structure.md\":\"DS4vSDpl\",\"guide_java.md\":\"D8jVGAov\",\"guide_scala.md\":\"BwiU7qAf\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Bali DI\",\"description\":\"A tool for dependency injection in Java and Scala at compile-time.\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"editLink\":{\"pattern\":\"https://github.com/christian-schlichtherle/bali-di-site/:path\",\"text\":\"Edit this page on GitHub\"},\"footer\":{\"message\":\"Released under the Apache License, Version 2.0.\",\"copyright\":\"Copyright © Schlichtherle IT Services.\"},\"logo\":{\"src\":\"/image/frangipani.png\",\"width\":102,\"height\":64},\"nav\":[{\"link\":\"/guide/java\",\"text\":\"Bali DI for Java\"},{\"link\":\"/guide/scala\",\"text\":\"Bali DI for Scala\"},{\"link\":\"https://github.com/christian-schlichtherle/bali-di-java\",\"text\":\"Java Repo\"},{\"link\":\"https://github.com/christian-schlichtherle/bali-di-scala\",\"text\":\"Scala Repo\"}],\"sidebar\":[{\"base\":\"/guide\",\"items\":[{\"link\":\"/introduction\",\"text\":\"Introduction\"},{\"link\":\"/java\",\"text\":\"Bali DI for Java\"},{\"link\":\"/scala\",\"text\":\"Bali DI for Scala\"},{\"link\":\"/structure\",\"text\":\"On Structuring Modules\"}]}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>